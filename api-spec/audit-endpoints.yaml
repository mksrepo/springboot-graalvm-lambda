# Add these paths to openapi.yaml after /products/search

  /audit-logs:
    get:
      tags:
        - Audit Logs
      summary: Get all audit logs
      description: Returns audit logs with optional filters for chaos analysis
      operationId: getAuditLogs
      parameters:
        - name: status
          in: query
          schema:
            type: string
            enum: [ATTEMPTED, SUCCEEDED, FAILED]
        - name: operation
          in: query
          schema:
            type: string
            enum: [CREATE, UPDATE, DELETE]
        - name: chaosActive
          in: query
          schema:
            type: boolean
        - name: startTime
          in: query
          schema:
            type: string
            format: date-time
        - name: endTime
          in: query
          schema:
            type: string
            format: date-time
      responses:
        '200':
          description: Successful operation
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/AuditLog'
    
    delete:
      tags:
        - Audit Logs
      summary: Delete old audit logs
      description: Delete audit logs before a specific timestamp
      operationId: deleteOldAuditLogs
      parameters:
        - name: before
          in: query
          required: true
          schema:
            type: string
            format: date-time
      responses:
        '204':
          description: Audit logs deleted successfully

  /audit-logs/all:
    delete:
      tags:
        - Audit Logs
      summary: Delete all audit logs
      description: Delete all audit logs (admin only)
      operationId: deleteAllAuditLogs
      responses:
        '204':
          description: All audit logs deleted successfully

  /audit-logs/product/{productId}:
    get:
      tags:
        - Audit Logs
      summary: Get audit logs for a product
      description: Returns all audit logs for a specific product
      operationId: getProductAuditLogs
      parameters:
        - name: productId
          in: path
          required: true
          schema:
            type: integer
            format: int64
      responses:
        '200':
          description: Successful operation
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/AuditLog'

  /audit-logs/failures:
    get:
      tags:
        - Audit Logs
      summary: Get failed operations
      description: Returns all failed operations (chaos-related)
      operationId: getFailedOperations
      responses:
        '200':
          description: Successful operation
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/AuditLog'

  /audit-logs/chaos-stats:
    get:
      tags:
        - Audit Logs
      summary: Get chaos statistics
      description: Returns statistics about chaos impact
      operationId: getChaosStatistics
      responses:
        '200':
          description: Successful operation
          content:
            application/json:
              schema:
                type: object
                properties:
                  totalSucceeded:
                    type: integer
                    format: int64
                  totalFailed:
                    type: integer
                    format: int64
                  chaosImpacted:
                    type: integer
                    format: int64
                  successRate:
                    type: number
                    format: double

# Add this schema to components/schemas

    AuditLog:
      type: object
      properties:
        id:
          type: integer
          format: int64
        eventId:
          type: string
          format: uuid
        eventType:
          type: string
        entityType:
          type: string
        entityId:
          type: integer
          format: int64
        operation:
          type: string
          enum: [CREATE, UPDATE, DELETE, READ]
        status:
          type: string
          enum: [ATTEMPTED, SUCCEEDED, FAILED]
        requestPayload:
          type: string
        responsePayload:
          type: string
        errorMessage:
          type: string
        httpStatusCode:
          type: integer
        requestTimestamp:
          type: string
          format: date-time
        completionTimestamp:
          type: string
          format: date-time
        durationMs:
          type: integer
          format: int64
        podName:
          type: string
        chaosActive:
          type: boolean
        createdAt:
          type: string
          format: date-time
